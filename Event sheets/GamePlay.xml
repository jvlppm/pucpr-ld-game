<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>GamePlay</name>
    <events>
        <include>Utils</include>
        <include>Camera</include>
        <event-group description="" sid="2897060075777959" title="Characters">
            <sub-events>
                <event-block sid="6429507390627526">
                    <conditions>
                        <condition id="-8" name="Is boolean instance variable set" sid="9606856087968288" type="Character">
                            <param id="0" name="Instance variable">AutoEnable</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="4680673911537968" type="System">
                            <param id="0" name="Object">Character</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="853795155706787">
                            <conditions>
                                <condition behavior="8Direction" id="1" name="Compare speed" sid="4568382050836169" type="Camera">
                                    <param id="0" name="Comparison">2</param>
                                    <param id="1" name="Speed">1</param>
                                </condition>
                                <condition id="-3" name="Is on-screen" sid="1765133814437218" type="Character" />
                                <condition id="-7" name="Compare instance variable" sid="6279757004825179" type="Character">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="2213488802749908" type="Character">
                                    <param id="0" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1219888893175615">
                            <conditions>
                                <condition id="-22" name="Else" sid="8143413496183939" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="10172761207788" type="Character">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="33976300699042">
                    <conditions>
                        <condition id="-8" name="Is boolean instance variable set" sid="9844189528466002" type="Player">
                            <param id="0" name="Instance variable">AutoEnable</param>
                        </condition>
                        <condition behavior="8Direction" id="1" name="Compare speed" sid="8554597378772326" type="Camera">
                            <param id="0" name="Comparison">2</param>
                            <param id="1" name="Speed">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="8" name="Set enabled" sid="5430085889670611" type="Player">
                            <param id="0" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8672916273063104">
                    <conditions>
                        <condition id="-22" name="Else" sid="8392509844057057" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="8" name="Set enabled" sid="1173883529244684" type="Player">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block disabled="1" sid="8531452890494635">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="4710453799687346" type="Character">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Solid" id="0" name="Set enabled" sid="1540750191993403" type="Character">
                            <param id="0" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8676823658211393">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="228195979821599" type="Character">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Solid" id="0" name="Set enabled" sid="240673453112404" type="Character">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="6442656417932284">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="1531065382594328" type="Character">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Value">-40</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="1652163925138002" type="Character">
                                    <param id="0" name="Animation">&quot;Squashed&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="4341916251342612">
                            <conditions>
                                <condition id="-22" name="Else" sid="7808106716603711" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="620959373516406" type="Character">
                                    <param id="0" name="Animation">&quot;Dead&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="3766674772289778" title="Victims">
            <sub-events>
                <event-block sid="6970142373032275">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="2311614204652689" type="Victim">
                            <param id="0" name="Object">Enemy</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-13" name="Set boolean" sid="2368519640305399" type="Victim">
                            <param id="0" name="Instance variable">Running</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1092732215192193">
                    <conditions>
                        <condition behavior="LineOfSight" id="0" name="Has LOS to object" sid="6559575564674128" type="Victim">
                            <param id="0" name="Object">Zombie</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-13" name="Set boolean" sid="388711598074224" type="Victim">
                            <param id="0" name="Instance variable">Running</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="3665040161346942">
                    <conditions>
                        <condition id="1" name="Is overlapping another object" sid="9758037715962836" type="Victim">
                            <param id="0" name="Object">Player</param>
                        </condition>
                    </conditions>
                    <actions />
                </event-block>
                <event-block sid="4706235495098837">
                    <conditions>
                        <condition id="-3" name="Is on-screen" sid="658511659056421" type="Victim" />
                        <condition id="-11" name="For Each" sid="8982328255764358" type="System">
                            <param id="0" name="Object">Victim</param>
                        </condition>
                        <condition id="-8" name="Is boolean instance variable set" sid="9292031129885653" type="Victim">
                            <param id="0" name="Instance variable">Running</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="x_component" sid="2863045986847837" static="0" type="number">0</variable>
                        <variable constant="0" name="y_component" sid="8762039936927857" static="0" type="number">0</variable>
                        <variable constant="0" name="count" sid="5621624683614894" static="0" type="number">0</variable>
                        <event-block sid="8883373093638601">
                            <conditions>
                                <condition id="-11" name="For Each" sid="1655314597990026" type="System">
                                    <param id="0" name="Object">Enemy</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="3805303534987038" type="System">
                                    <param id="0" name="First value">distance(Victim.X, Victim.Y, Enemy.X, Enemy.Y)</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">50</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="1270273028338113" type="Character">
                                    <param id="0" name="Unique ID">Enemy.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="7413495499100982" type="System">
                                    <param id="0" name="Variable">x_component</param>
                                    <param id="1" name="Value">cos(angle(Victim.X, Victim.Y, Enemy.X, Enemy.Y))</param>
                                </action>
                                <action id="-10" name="Add to" sid="6778603739686324" type="System">
                                    <param id="0" name="Variable">y_component</param>
                                    <param id="1" name="Value">sin(angle(Victim.X, Victim.Y, Enemy.X, Enemy.Y))</param>
                                </action>
                                <action id="-10" name="Add to" sid="9912264946036453" type="System">
                                    <param id="0" name="Variable">count</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9918109228565961">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="2420172785526148" type="System">
                                    <param id="0" name="Variable">x_component</param>
                                    <param id="1" name="Value">x_component / count</param>
                                </action>
                                <action id="-9" name="Set value" sid="3429353078116513" type="System">
                                    <param id="0" name="Variable">y_component</param>
                                    <param id="1" name="Value">y_component / count</param>
                                </action>
                                <action id="-8" name="Set angle" sid="4624724653915555" type="Victim">
                                    <param id="0" name="Angle">270 - angle(0, 0, y_component, x_component)</param>
                                </action>
                                <action behavior="Bullet" id="0" name="Set speed" sid="2554529063315405" type="Victim">
                                    <param id="0" name="Speed">Victim.MaxSpeed</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="3023869248624889">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="7925112190826842" type="System">
                                    <param id="0" name="Variable">count</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Bullet" id="0" name="Set speed" sid="6163844204734128" type="Victim">
                                    <param id="0" name="Speed">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="3052503956438317" title="Zombies">
            <sub-events>
                <event-block sid="2747026023799614">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="5328620491563456" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="LineOfSight" id="2" name="Add obstacle" sid="1801982842913132" type="Zombie">
                            <param id="0" name="Obstacle">Wall</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5032556258015384">
                    <conditions>
                        <condition id="9" name="Is overlapping at offset" sid="5661433258847534" type="Zombie">
                            <param id="0" name="Object">GoodGuy</param>
                            <param id="1" name="Offset X">Function.Call(&quot;LengthDir&quot;, &quot;x&quot;, 2, Zombie.Angle)</param>
                            <param id="2" name="Offset Y">Function.Call(&quot;LengthDir&quot;, &quot;y&quot;, 2, Zombie.Angle)</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="4828505588819494" type="Zombie">
                            <param id="0" name="Instance variable">Holding</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="3930107320249303" type="Zombie">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="5496899234060294" type="Function">
                            <param id="0" name="Name">&quot;ZombieHold&quot;</param>
                            <param id="1" name="Parameter {n}">Zombie.UID{###}GoodGuy.UID</param>
                        </action>
                        <action id="-16" name="Wait" sid="1710987007140365" type="System">
                            <param id="0" name="Seconds">2</param>
                        </action>
                        <action id="0" name="Call function" sid="8293568104151504" type="Function">
                            <param id="0" name="Name">&quot;ZombieRelease&quot;</param>
                            <param id="1" name="Parameter {n}">Zombie.UID{###}GoodGuy.UID</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8362821904132712">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="8742657174246423" type="Zombie">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="6651072337187063" type="Zombie">
                            <param id="0" name="Instance variable">Holding</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="1804097587887903" type="Function">
                            <param id="0" name="Name">&quot;ZombieRelease&quot;</param>
                            <param id="1" name="Parameter {n}">Zombie.UID{###}Zombie.Holding</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="3011547771811964">
                    <conditions>
                        <condition id="-11" name="For Each" sid="4081659821480804" type="System">
                            <param id="0" name="Object">Zombie</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="1897773520524168">
                            <conditions>
                                <condition id="-3" name="Is on-screen" sid="1164320351851821" type="Zombie" />
                                <condition id="-7" name="Compare instance variable" sid="1483123731536603" type="Zombie">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                                <condition behavior="LineOfSight" id="0" name="Has LOS to object" sid="4055011458893377" type="Zombie">
                                    <param id="0" name="Object">GoodGuy</param>
                                </condition>
                                <condition id="-3" name="Is on-screen" sid="9944639276474629" type="GoodGuy" />
                                <condition id="-13" name="Pick nth instance" sid="5896171138686972" type="System">
                                    <param id="0" name="Object">GoodGuy</param>
                                    <param id="1" name="Instance">0</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="7402167463437018" type="Character">
                                    <param id="0" name="Unique ID">GoodGuy.UID</param>
                                </condition>
                                <condition behavior="Sine" id="0" inverted="1" name="Is active" sid="6700788079223877" type="Character" />
                            </conditions>
                            <actions>
                                <action behavior="Bullet" id="0" name="Set speed" sid="9416666472783391" type="Zombie">
                                    <param id="0" name="Speed">40</param>
                                </action>
                                <action id="-8" name="Set angle" sid="2521059445827661" type="Zombie">
                                    <param id="0" name="Angle">angle(Zombie.X, Zombie.Y, GoodGuy.X, GoodGuy.Y)</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="2969633999135346" type="Zombie">
                                    <param id="0" name="Instance variable">Following</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5492314109396737">
                            <conditions>
                                <condition id="-22" name="Else" sid="1731997867988263" type="System" />
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="7594739965999439" type="Zombie">
                                    <param id="0" name="Instance variable">KeepWalking</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Bullet" id="0" name="Set speed" sid="7890903541871821" type="Zombie">
                                    <param id="0" name="Speed">0</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="7063691312794825" type="Zombie">
                                    <param id="0" name="Instance variable">Following</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="5715188491627261">
                    <conditions>
                        <condition id="0" name="On function" sid="1432867587613914" type="Function">
                            <param id="0" name="Name">&quot;ZombieHold&quot;</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="5527378287441479" type="Zombie">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="3208803596807013" type="Zombie">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="1764832235118494" type="Character">
                            <param id="0" name="Unique ID">Function.Param(1)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-13" name="Set boolean" sid="6786075232568224" type="Character">
                            <param id="0" name="Instance variable">AutoEnable</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="793357632506115" type="Zombie">
                            <param id="0" name="Instance variable">AutoEnable</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="4150268351383997" type="Zombie">
                            <param id="0" name="Instance variable">Holding</param>
                            <param id="1" name="Value">Character.UID</param>
                        </action>
                        <action behavior="Sine" id="0" name="Set active" sid="1158397562513376" type="Character">
                            <param id="0" name="State">1</param>
                        </action>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="2684671191408064" type="Character">
                            <param id="0" name="State">0</param>
                        </action>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="1638344797867103" type="Zombie">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="-8" name="Set angle" sid="2684831201144417" type="Zombie">
                            <param id="0" name="Angle">angle(Zombie.X, Zombie.Y, Character.X, Character.Y)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6161878113429321">
                    <conditions>
                        <condition id="0" name="On function" sid="9989210086701573" type="Function">
                            <param id="0" name="Name">&quot;ZombieRelease&quot;</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="7056476761576042" type="Zombie">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="3074319268331587" type="Character">
                            <param id="0" name="Unique ID">Function.Param(1)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="4170366143394197" type="Zombie">
                            <param id="0" name="Instance variable">Holding</param>
                            <param id="1" name="Value">-1</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="5587902954441136" type="Character">
                            <param id="0" name="Instance variable">AutoEnable</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="6168518124121981" type="Zombie">
                            <param id="0" name="Instance variable">AutoEnable</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action behavior="Sine" id="0" name="Set active" sid="844276943980011" type="Character">
                            <param id="0" name="State">0</param>
                        </action>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="1451248643632821" type="Character">
                            <param id="0" name="State">1</param>
                        </action>
                        <action id="-17" name="Move forward" sid="6838896887525652" type="Zombie">
                            <param id="0" name="Distance">-2</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="1936268066267517">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="26447679855805" type="Zombie">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action disabled="1" id="-17" name="Move forward" sid="4120157305470225" type="Zombie">
                                    <param id="0" name="Distance">-6</param>
                                </action>
                                <action disabled="1" id="-23" name="Move at angle" sid="1383330590275407" type="Character">
                                    <param id="0" name="Angle">Zombie.Angle</param>
                                    <param id="1" name="Distance">4</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="484197694518535">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="3512342995677946" type="Zombie">
                            <param id="0" name="Object">ChangeDirection</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="7168828544640383" type="Zombie">
                            <param id="0" name="Instance variable">Following</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-8" name="Set angle" sid="5298982561410116" type="Zombie">
                            <param id="0" name="Angle">180-Zombie.Angle</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="" sid="6773088495970466" title="Balloon">
            <sub-events>
                <event-block sid="1755681182641615">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="8760342310712686" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Clear" sid="6407746087734199" type="Messages" />
                    </actions>
                </event-block>
                <event-block sid="9441057967663321">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="3447303958088918" type="System" />
                    </conditions>
                    <actions>
                        <action id="-2" name="Set Y" sid="1488310737403378" type="BalloonText">
                            <param id="0" name="Y">Balloon.Y + (Balloon.Height - BalloonText.Height) / 2</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6011596442802542">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="8657773377038484" type="Messages">
                            <param id="0" name="Instance variable">Message</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="7060292305672026" type="BalloonText">
                            <param id="0" name="Text">Messages.At(Messages.Message, Messages.Index)</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="4526364845056258" type="Player">
                            <param id="0" name="Instance variable">AutoEnable</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="9086652315371314">
                            <conditions>
                                <condition id="-2" name="Compare Y" sid="4216043330215499" type="Balloon">
                                    <param id="0" name="Comparison">4</param>
                                    <param id="1" name="Y co-ordinate">Balloon.VisibleY</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="4249936376478894" type="Balloon">
                                    <param id="0" name="Control">2</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6688939102978162">
                            <conditions>
                                <condition id="-22" name="Else" sid="9222040371309797" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="10" name="Set vector Y" sid="3628129254842723" type="Balloon">
                                    <param id="0" name="Vector Y">0</param>
                                </action>
                                <action id="-2" name="Set Y" sid="164183972102272" type="Balloon">
                                    <param id="0" name="Y">Balloon.VisibleY</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1140119623031024">
                            <conditions>
                                <condition id="1" name="On any key pressed" sid="9987741443494835" type="Keyboard" />
                            </conditions>
                            <actions>
                                <action id="-11" name="Add to" sid="385591119408046" type="Messages">
                                    <param id="0" name="Instance variable">Index</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="831259068052723">
                                    <conditions>
                                        <condition id="1" name="Compare at XY" sid="3156978444796488" type="Messages">
                                            <param id="0" name="X">Messages.Message</param>
                                            <param id="1" name="Y">Messages.Index</param>
                                            <param id="2" name="Comparison">0</param>
                                            <param id="3" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="4440537280776472" type="Messages">
                                            <param id="0" name="Instance variable">Message</param>
                                            <param id="1" name="Value">-1</param>
                                        </action>
                                        <action id="-13" name="Set boolean" sid="5573795289503759" type="Player">
                                            <param id="0" name="Instance variable">AutoEnable</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="959565781022128" type="Messages">
                                            <param id="0" name="Instance variable">Index</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="7625959734013255">
                    <conditions>
                        <condition id="-22" name="Else" sid="8417102441656297" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="6502982153532224">
                            <conditions>
                                <condition id="-2" name="Compare Y" sid="1118332577635214" type="Balloon">
                                    <param id="0" name="Comparison">2</param>
                                    <param id="1" name="Y co-ordinate">Balloon.InvisibleY</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="6040114476631735" type="Balloon">
                                    <param id="0" name="Control">3</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="2558828820212618">
                            <conditions>
                                <condition id="-22" name="Else" sid="6326773206917017" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="10" name="Set vector Y" sid="9727494272365772" type="Balloon">
                                    <param id="0" name="Vector Y">0</param>
                                </action>
                                <action id="-2" name="Set Y" sid="9224849496441325" type="Balloon">
                                    <param id="0" name="Y">Balloon.InvisibleY</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="7871028774943537" title="Player">
            <sub-events>
                <event-block sid="8280718908687473">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="1089611285238527" type="Keyboard">
                            <param id="0" name="Key">90 (Z)</param>
                        </condition>
                        <condition id="-8" name="Is boolean instance variable set" sid="2570044362247388" type="Player">
                            <param id="0" name="Instance variable">CarryingKnife</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="3063615560442297" type="Player">
                            <param id="0" name="Object">Knife</param>
                            <param id="1" name="Layer">Player.LayerNumber</param>
                            <param id="2" name="Image point">&quot;Weapon&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="6133892983294666" type="Knife">
                            <param id="0" name="Instance variable">Owner</param>
                            <param id="1" name="Value">Player.UID</param>
                        </action>
                        <action id="-29" name="Move to object" sid="794924080227958" type="Knife">
                            <param id="0" name="Where">1</param>
                            <param id="1" name="Object">Player</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2187940477451241">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="1695418716870088" type="Keyboard">
                            <param id="0" name="Key">88 (X)</param>
                        </condition>
                        <condition id="-8" name="Is boolean instance variable set" sid="932696270608911" type="Player">
                            <param id="0" name="Instance variable">CarryingGun</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="5721202237890695" type="Gun">
                            <param id="0" name="Object">SimpleBullet</param>
                            <param id="1" name="Layer">Player.LayerNumber</param>
                            <param id="2" name="Image point">&quot;Front&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="4632564685417155" type="SimpleBullet">
                            <param id="0" name="Instance variable">Owner</param>
                            <param id="1" name="Value">Player.UID</param>
                        </action>
                        <action id="-29" name="Move to object" sid="2903752708476008" type="SimpleBullet">
                            <param id="0" name="Where">1</param>
                            <param id="1" name="Object">Player</param>
                        </action>
                        <action id="-8" name="Set angle" sid="4135992262359893" type="SimpleBullet">
                            <param id="0" name="Angle">Player.Angle</param>
                        </action>
                        <action id="0" name="Spawn another object" sid="8551624278586166" type="Gun">
                            <param id="0" name="Object">BulletShell</param>
                            <param id="1" name="Layer">Gun.LayerNumber</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="9438459470599618" type="BulletShell">
                            <param id="0" name="Angle">180 - Player.Angle + random(180) - 90</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="3193611664449879" title="Weapons">
            <sub-events>
                <event-block sid="1870731739834124">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="3316987684974905" type="Weapon">
                            <param id="0" name="Instance variable">Owner</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="4237205213374989" type="System">
                            <param id="0" name="Object">Weapon</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="1376139642810037" type="Character">
                            <param id="0" name="Unique ID">Weapon.Owner</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set position to another object" sid="219662155578734" type="Weapon">
                            <param id="0" name="Object">Character</param>
                            <param id="1" name="Image point (optional)">&quot;Weapon&quot;</param>
                        </action>
                        <action id="-8" name="Set angle" sid="9488138421858991" type="Weapon">
                            <param id="0" name="Angle">Character.Angle</param>
                        </action>
                    </actions>
                </event-block>
                <event-group collapsed="1" description="" sid="6454508332916548" title="Knife">
                    <sub-events>
                        <event-block collapsed="1" sid="4064754307868574">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="6048919233397953" type="Knife">
                                    <param id="0" name="Instance variable">Owner</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="7023371633381726">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="1174450378627109" type="Knife">
                                            <param id="0" name="Instance variable">State</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;GoingBack&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-12" name="Subtract from" sid="7837577618410107" type="Knife">
                                            <param id="0" name="Instance variable">Distance</param>
                                            <param id="1" name="Value">dt * 160</param>
                                        </action>
                                        <action id="-17" name="Move forward" sid="603118444205213" type="Knife">
                                            <param id="0" name="Distance">Knife.Distance</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="9241586652948249">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="3576719587709574" type="Knife">
                                                    <param id="0" name="Instance variable">Distance</param>
                                                    <param id="1" name="Comparison">3</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="8469836282091991" type="Knife" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="3716272604030348">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="8096057272427492" type="Knife">
                                            <param id="0" name="Instance variable">State</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;GoingForward&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-11" name="Add to" sid="3208995944450642" type="Knife">
                                            <param id="0" name="Instance variable">Distance</param>
                                            <param id="1" name="Value">dt * 80</param>
                                        </action>
                                        <action id="-17" name="Move forward" sid="9283433093325673" type="Knife">
                                            <param id="0" name="Distance">Knife.Distance</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="5097237189651301">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="5848555511311371" type="Knife">
                                                    <param id="0" name="Instance variable">Distance</param>
                                                    <param id="1" name="Comparison">5</param>
                                                    <param id="2" name="Value">8</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="2757489438274415" type="Knife">
                                                    <param id="0" name="Instance variable">State</param>
                                                    <param id="1" name="Value">&quot;GoingBack&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="1215233557027737">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="3123790428077183" type="Knife">
                                    <param id="0" name="Object">Character</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="9601841430931611" type="System">
                                    <param id="0" name="First value">Character.UID</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">Knife.Owner</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="9188804513681333" type="Knife">
                                    <param id="0" name="Instance variable">Hit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action disabled="1" id="-10" name="Set value" sid="4117443700324915" type="Knife">
                                    <param id="0" name="Instance variable">State</param>
                                    <param id="1" name="Value">&quot;GoingBack&quot;</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="6171942957148739">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4116065204453974" type="Character">
                                            <param id="0" name="Instance variable">Health</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="6166959941014352" type="Knife">
                                            <param id="0" name="Instance variable">Hit</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="7752977712207892">
                                    <conditions />
                                    <actions>
                                        <action id="-12" name="Subtract from" sid="4582330531617707" type="Character">
                                            <param id="0" name="Instance variable">Health</param>
                                            <param id="1" name="Value">5</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="8165322307502895" title="Gun">
                    <sub-events>
                        <event-block sid="3967618514829974">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="6070128793063599" type="Player">
                                    <param id="0" name="Instance variable">CarryingGun</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="6038925406496068" type="Gun">
                                    <param id="0" name="Instance variable">OldPlayerX2</param>
                                    <param id="1" name="Value">Gun.OldPlayerX1</param>
                                </action>
                                <action id="-10" name="Set value" sid="4492246063247969" type="Gun">
                                    <param id="0" name="Instance variable">OldPlayerY2</param>
                                    <param id="1" name="Value">Gun.OldPlayerY1</param>
                                </action>
                                <action id="-10" name="Set value" sid="256096872754471" type="Gun">
                                    <param id="0" name="Instance variable">OldPlayerX1</param>
                                    <param id="1" name="Value">Player.X + Player.ImagePointX(&quot;Weapon&quot;) - Player.ImagePointX(0)</param>
                                </action>
                                <action id="-10" name="Set value" sid="8433072573937336" type="Gun">
                                    <param id="0" name="Instance variable">OldPlayerY1</param>
                                    <param id="1" name="Value">Player.Y + Player.ImagePointY(&quot;Weapon&quot;) - Player.ImagePointY(0)</param>
                                </action>
                                <action id="-3" name="Set position" sid="8170897702940212" type="Gun">
                                    <param id="0" name="X">Gun.OldPlayerX2</param>
                                    <param id="1" name="Y">Gun.OldPlayerY2</param>
                                </action>
                                <action id="-8" name="Set angle" sid="992746278404357" type="Gun">
                                    <param id="0" name="Angle">Player.Angle</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5133677701216001">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="3002297516345176" type="Bullet">
                                    <param id="0" name="Object">Character</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="5370091173307494" type="Character">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="6681680387909679" type="Bullet" />
                                <action id="-12" name="Subtract from" sid="3433670883948858" type="Character">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7896721733903308">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="6888559504120867" type="Bullet">
                                    <param id="0" name="Object">Wall</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="3707303961597535" type="Bullet" />
                            </actions>
                        </event-block>
                        <event-block sid="131774704703046">
                            <conditions>
                                <condition id="-34" name="Pick by evaluate" sid="6437212249968795" type="System">
                                    <param id="0" name="Object">BulletShell</param>
                                    <param id="1" name="Expression">BulletShell.Sine.CyclePosition &gt; 0.5</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Sine" id="0" name="Set active" sid="5312278535481272" type="BulletShell">
                                    <param id="0" name="State">0</param>
                                </action>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="1694180838336522" type="BulletShell">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
